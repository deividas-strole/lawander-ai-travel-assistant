{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Deividas\\\\aaaaaMyProjects\\\\LaWander\\\\Front\\\\src\\\\pages\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"../css/chat.css\";\n\n// Components\nimport ChatMessage from \"../components/Chat/ChatMessage\";\nimport ChatInput from \"../components/Chat/ChatInput\";\nimport MapView from \"../components/Map/MapView\";\n\n// Utils and Services\nimport { extractPlaceNames, extractPlaceDescriptions, formatItineraryToHtml } from \"../utils/textProcessing\";\nimport { geocodeDestination, geocodePlaces } from \"../services/geocodingService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// Fix for default markers in react-leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\")\n});\nfunction Chat({\n  destination,\n  days,\n  onBackToWelcome\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [mapCenter, setMapCenter] = useState([51.505, -0.09]);\n  const [destinationMarker, setDestinationMarker] = useState(null);\n  const [placeMarkers, setPlaceMarkers] = useState([]);\n  const markerRefs = useRef({});\n  const messagesEndRef = useRef(null);\n  const itineraryRunRef = useRef(\"\");\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  const handleGeocodeDestination = async destinationName => {\n    const result = await geocodeDestination(destinationName);\n    if (result) {\n      setMapCenter(result.coordinates);\n      setDestinationMarker({\n        position: result.coordinates,\n        popup: `${destinationName} - Your destination for ${days} days`,\n        type: \"destination\",\n        placeName: destinationName,\n        fullAddress: `${destinationName}, ${result.displayName}`\n      });\n      return result.coordinates;\n    }\n    return null;\n  };\n  const handleGeocodePlaces = async (placeNames, placeDescriptions, destCoords) => {\n    const {\n      markers,\n      foundPlaces\n    } = await geocodePlaces(placeNames, placeDescriptions, destCoords, destination // Pass destination name for geocoding queries\n    );\n    if (markers.length > 0) {\n      setPlaceMarkers(prev => {\n        const allMarkers = [...prev, ...markers];\n        const seen = new Set();\n        return allMarkers.filter(m => {\n          if (seen.has(m.placeName)) return false;\n          seen.add(m.placeName);\n          return true;\n        });\n      });\n    }\n    return foundPlaces;\n  };\n  useEffect(() => {\n    (async () => {\n      if (!destination || !days) return;\n      const runKey = `${String(destination).trim().toLowerCase()}|${String(days).trim()}`;\n      if (itineraryRunRef.current === runKey) {\n        console.log(\"‚è≠Ô∏è Skipping duplicate itinerary generation for\", runKey);\n        return;\n      }\n      itineraryRunRef.current = runKey;\n      try {\n        setMessages([{\n          id: 0,\n          text: \"Generating your itinerary...I'm slow because I'm free! üê¢üê¢üê¢\",\n          sender: \"ai\",\n          timestamp: new Date().toLocaleTimeString(),\n          isLoading: true\n        }]);\n        console.log(\"üî∞ Starting itinerary generation for\", destination, days);\n        const destCoords = await handleGeocodeDestination(destination);\n        if (!destCoords) {\n          throw new Error(\"Could not geocode destination\");\n        }\n        console.log(\"‚úÖ Destination geocoded:\", destCoords);\n        const itineraryPrompt = `Create a concise, practical ${days}-day travel itinerary for ${destination}.\n\nCRITICAL REQUIREMENTS:\n- ONLY include major, well-known attractions, landmarks, and establishments\n- Use simple, commonly-known names (e.g., \"Old Town\" not \"Historic Old Quarter\")\n- Avoid specific restaurant/cafe/bar names unless they're very famous\n- Focus on parks, churches, museums, main squares, rivers, etc.\n- For every place, wrap the name in **double asterisks**\n- Provide 3-6 items per day with short descriptions\n\nExample format:\n**Main Cathedral** - Description\n**City Park** - Description\n**Old Town Square** - Description\n`;\n        const response = await fetch(`${API_URL}/api/chat`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            message: itineraryPrompt\n          })\n        });\n        if (!response.ok) throw new Error(`HTTP error ${response.status}`);\n        const data = await response.json();\n        const placeNames = extractPlaceNames(data.message);\n        const placeDescriptions = extractPlaceDescriptions(data.message, placeNames);\n        let foundPlaces = [];\n        if (placeNames.length > 0) {\n          foundPlaces = await handleGeocodePlaces(placeNames, placeDescriptions, destCoords);\n        }\n        const welcomeMessage = {\n          id: 1,\n          text: `Welcome! I'll help you plan your ${days}-day trip to ${destination}. What would you like to know about your destination?`,\n          sender: \"ai\",\n          timestamp: new Date().toLocaleTimeString(),\n          isWelcome: true\n        };\n        setMessages([{\n          id: 0,\n          text: `Here is a suggested ${days}-day itinerary for ${destination}:<br/><br/>${formatItineraryToHtml(data.message, foundPlaces)}`,\n          sender: \"ai\",\n          timestamp: new Date().toLocaleTimeString(),\n          foundPlaces,\n          isItinerary: true\n        }, welcomeMessage]);\n      } catch (err) {\n        console.error(\"Failed to generate itinerary:\", err);\n        const welcomeMessage = {\n          id: 1,\n          text: `Welcome! I'll help you plan your ${days}-day trip to ${destination}. What would you like to know about your destination?`,\n          sender: \"ai\",\n          timestamp: new Date().toLocaleTimeString(),\n          isWelcome: true\n        };\n        setMessages([{\n          id: 0,\n          text: \"Could not generate itinerary automatically. You can ask for suggestions in the chat.\",\n          sender: \"ai\",\n          timestamp: new Date().toLocaleTimeString()\n        }, welcomeMessage]);\n      }\n    })();\n  }, [destination, days]);\n  useEffect(() => {\n    scrollToBottom();\n    const handleClick = e => {\n      const target = e.target;\n      if (target.classList.contains(\"clickable-place\")) {\n        const placeName = target.getAttribute(\"data-place\");\n        const ref = markerRefs.current[placeName];\n        if (ref && ref.current && ref.current.openPopup) {\n          ref.current.openPopup();\n        }\n      }\n    };\n    document.addEventListener(\"click\", handleClick);\n    return () => {\n      document.removeEventListener(\"click\", handleClick);\n    };\n  }, [messages, placeMarkers]);\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!inputMessage.trim()) return;\n    const newMessage = {\n      id: messages.length + 1,\n      text: inputMessage,\n      sender: \"user\",\n      timestamp: new Date().toLocaleTimeString()\n    };\n    setMessages([...messages, newMessage]);\n    const userMessage = inputMessage;\n    setInputMessage(\"\");\n    const loadingMessage = {\n      id: messages.length + 2,\n      text: \"LaWander is thinking...\",\n      sender: \"ai\",\n      timestamp: new Date().toLocaleTimeString(),\n      isLoading: true\n    };\n    setMessages(prev => [...prev, loadingMessage]);\n    try {\n      const contextualMessage = `Context: The user is planning a ${days}-day trip to ${destination}. \n\nIMPORTANT INSTRUCTIONS:\n- If the user asks for a specific type of place (restaurants, museums, hotels, etc.), ONLY provide places of that exact type\n- ALL places must be located in or very near ${destination}\n- When mentioning places, use the format **PlaceName** for each place\n- Be specific and accurate about locations - only include places that are actually in ${destination}\n- For each place you mention, provide a brief description (1-2 sentences) about what makes it special or what it offers\n- Include practical information like cuisine type, atmosphere, or unique features\n\nUser question: ${userMessage}`;\n      const response = await fetch(`${API_URL}/api/chat`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          message: contextualMessage\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      const placeNames = extractPlaceNames(data.message);\n      console.log(\"AI Response:\", data.message);\n      console.log(\"Extracted place names:\", placeNames);\n      const placeDescriptions = extractPlaceDescriptions(data.message, placeNames);\n      let foundPlaces = [];\n      if (placeNames.length > 0) {\n        console.log(\"Starting geocoding for\", placeNames.length, \"places\");\n        const destCoords = destinationMarker ? destinationMarker.position : null;\n        foundPlaces = await handleGeocodePlaces(placeNames, placeDescriptions, destCoords);\n      } else {\n        console.log(\"No place names found in AI response\");\n      }\n      setMessages(prev => {\n        const withoutLoading = prev.filter(msg => !msg.isLoading);\n        const aiResponse = {\n          id: withoutLoading.length + 1,\n          text: data.message,\n          sender: \"ai\",\n          timestamp: new Date().toLocaleTimeString(),\n          foundPlaces: foundPlaces\n        };\n        return [...withoutLoading, aiResponse];\n      });\n    } catch (error) {\n      console.error(\"Error calling chat API:\", error);\n      setMessages(prev => {\n        const withoutLoading = prev.filter(msg => !msg.isLoading);\n        const errorResponse = {\n          id: withoutLoading.length + 1,\n          text: \"Sorry, I'm having trouble connecting to the server. Please try again later.\",\n          sender: \"ai\",\n          timestamp: new Date().toLocaleTimeString()\n        };\n        return [...withoutLoading, errorResponse];\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: onBackToWelcome,\n          children: \"\\u2190 Change Trip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"chat-title\",\n          children: \"LaWander\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trip-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"destination\",\n          children: destination\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"days\",\n          children: [days, \" days\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-window\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages-container\",\n          children: [messages.map(message => /*#__PURE__*/_jsxDEV(ChatMessage, {\n            message: message\n          }, message.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ChatInput, {\n          value: inputMessage,\n          onChange: e => setInputMessage(e.target.value),\n          onSubmit: handleSendMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapView, {\n        mapCenter: mapCenter,\n        destinationMarker: destinationMarker,\n        placeMarkers: placeMarkers,\n        markerRefs: markerRefs,\n        days: days\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 305,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"u8wsmOu9nZkjewqcmNsVD/TozYA=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","L","ChatMessage","ChatInput","MapView","extractPlaceNames","extractPlaceDescriptions","formatItineraryToHtml","geocodeDestination","geocodePlaces","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","Chat","destination","days","onBackToWelcome","_s","messages","setMessages","inputMessage","setInputMessage","mapCenter","setMapCenter","destinationMarker","setDestinationMarker","placeMarkers","setPlaceMarkers","markerRefs","messagesEndRef","itineraryRunRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleGeocodeDestination","destinationName","result","coordinates","position","popup","type","placeName","fullAddress","displayName","handleGeocodePlaces","placeNames","placeDescriptions","destCoords","markers","foundPlaces","length","prev","allMarkers","seen","Set","filter","m","has","add","runKey","String","trim","toLowerCase","console","log","id","text","sender","timestamp","Date","toLocaleTimeString","isLoading","Error","itineraryPrompt","response","fetch","method","headers","body","JSON","stringify","message","ok","status","data","json","welcomeMessage","isWelcome","isItinerary","err","error","handleClick","e","target","classList","contains","getAttribute","ref","openPopup","document","addEventListener","removeEventListener","handleSendMessage","preventDefault","newMessage","userMessage","loadingMessage","contextualMessage","withoutLoading","msg","aiResponse","errorResponse","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","map","value","onChange","onSubmit","_c","$RefreshReg$"],"sources":["C:/Users/Deividas/aaaaaMyProjects/LaWander/Front/src/pages/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"../css/chat.css\";\r\n\r\n// Components\r\nimport ChatMessage from \"../components/Chat/ChatMessage\";\r\nimport ChatInput from \"../components/Chat/ChatInput\";\r\nimport MapView from \"../components/Map/MapView\";\r\n\r\n// Utils and Services\r\nimport {\r\n  extractPlaceNames,\r\n  extractPlaceDescriptions,\r\n  formatItineraryToHtml\r\n} from \"../utils/textProcessing\";\r\nimport { geocodeDestination, geocodePlaces } from \"../services/geocodingService\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\n\r\n// Fix for default markers in react-leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\r\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\r\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\r\n});\r\n\r\nfunction Chat({ destination, days, onBackToWelcome }) {\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [mapCenter, setMapCenter] = useState([51.505, -0.09]);\r\n  const [destinationMarker, setDestinationMarker] = useState(null);\r\n  const [placeMarkers, setPlaceMarkers] = useState([]);\r\n  const markerRefs = useRef({});\r\n  const messagesEndRef = useRef(null);\r\n  const itineraryRunRef = useRef(\"\");\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const handleGeocodeDestination = async (destinationName) => {\r\n    const result = await geocodeDestination(destinationName);\r\n    if (result) {\r\n      setMapCenter(result.coordinates);\r\n      setDestinationMarker({\r\n        position: result.coordinates,\r\n        popup: `${destinationName} - Your destination for ${days} days`,\r\n        type: \"destination\",\r\n        placeName: destinationName,\r\n        fullAddress: `${destinationName}, ${result.displayName}`,\r\n      });\r\n      return result.coordinates;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleGeocodePlaces = async (placeNames, placeDescriptions, destCoords) => {\r\n    const { markers, foundPlaces } = await geocodePlaces(\r\n      placeNames,\r\n      placeDescriptions,\r\n      destCoords,\r\n      destination  // Pass destination name for geocoding queries\r\n    );\r\n\r\n    if (markers.length > 0) {\r\n      setPlaceMarkers((prev) => {\r\n        const allMarkers = [...prev, ...markers];\r\n        const seen = new Set();\r\n        return allMarkers.filter(m => {\r\n          if (seen.has(m.placeName)) return false;\r\n          seen.add(m.placeName);\r\n          return true;\r\n        });\r\n      });\r\n    }\r\n\r\n    return foundPlaces;\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!destination || !days) return;\r\n      const runKey = `${String(destination).trim().toLowerCase()}|${String(days).trim()}`;\r\n      if (itineraryRunRef.current === runKey) {\r\n        console.log(\"‚è≠Ô∏è Skipping duplicate itinerary generation for\", runKey);\r\n        return;\r\n      }\r\n      itineraryRunRef.current = runKey;\r\n\r\n      try {\r\n        setMessages([\r\n          {\r\n            id: 0,\r\n            text: \"Generating your itinerary...I'm slow because I'm free! üê¢üê¢üê¢\",\r\n            sender: \"ai\",\r\n            timestamp: new Date().toLocaleTimeString(),\r\n            isLoading: true,\r\n          },\r\n        ]);\r\n\r\n        console.log(\"üî∞ Starting itinerary generation for\", destination, days);\r\n\r\n        const destCoords = await handleGeocodeDestination(destination);\r\n\r\n        if (!destCoords) {\r\n          throw new Error(\"Could not geocode destination\");\r\n        }\r\n\r\n        console.log(\"‚úÖ Destination geocoded:\", destCoords);\r\n\r\n        const itineraryPrompt = `Create a concise, practical ${days}-day travel itinerary for ${destination}.\r\n\r\nCRITICAL REQUIREMENTS:\r\n- ONLY include major, well-known attractions, landmarks, and establishments\r\n- Use simple, commonly-known names (e.g., \"Old Town\" not \"Historic Old Quarter\")\r\n- Avoid specific restaurant/cafe/bar names unless they're very famous\r\n- Focus on parks, churches, museums, main squares, rivers, etc.\r\n- For every place, wrap the name in **double asterisks**\r\n- Provide 3-6 items per day with short descriptions\r\n\r\nExample format:\r\n**Main Cathedral** - Description\r\n**City Park** - Description\r\n**Old Town Square** - Description\r\n`;\r\n\r\n        const response = await fetch(`${API_URL}/api/chat`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ message: itineraryPrompt }),\r\n        });\r\n\r\n        if (!response.ok) throw new Error(`HTTP error ${response.status}`);\r\n        const data = await response.json();\r\n\r\n        const placeNames = extractPlaceNames(data.message);\r\n        const placeDescriptions = extractPlaceDescriptions(data.message, placeNames);\r\n\r\n        let foundPlaces = [];\r\n        if (placeNames.length > 0) {\r\n          foundPlaces = await handleGeocodePlaces(placeNames, placeDescriptions, destCoords);\r\n        }\r\n\r\n        const welcomeMessage = {\r\n          id: 1,\r\n          text: `Welcome! I'll help you plan your ${days}-day trip to ${destination}. What would you like to know about your destination?`,\r\n          sender: \"ai\",\r\n          timestamp: new Date().toLocaleTimeString(),\r\n          isWelcome: true,\r\n        };\r\n\r\n        setMessages([\r\n          {\r\n            id: 0,\r\n            text: `Here is a suggested ${days}-day itinerary for ${destination}:<br/><br/>${formatItineraryToHtml(\r\n              data.message,\r\n              foundPlaces\r\n            )}`,\r\n            sender: \"ai\",\r\n            timestamp: new Date().toLocaleTimeString(),\r\n            foundPlaces,\r\n            isItinerary: true,\r\n          },\r\n          welcomeMessage,\r\n        ]);\r\n      } catch (err) {\r\n        console.error(\"Failed to generate itinerary:\", err);\r\n        const welcomeMessage = {\r\n          id: 1,\r\n          text: `Welcome! I'll help you plan your ${days}-day trip to ${destination}. What would you like to know about your destination?`,\r\n          sender: \"ai\",\r\n          timestamp: new Date().toLocaleTimeString(),\r\n          isWelcome: true,\r\n        };\r\n        setMessages([\r\n          {\r\n            id: 0,\r\n            text: \"Could not generate itinerary automatically. You can ask for suggestions in the chat.\",\r\n            sender: \"ai\",\r\n            timestamp: new Date().toLocaleTimeString(),\r\n          },\r\n          welcomeMessage,\r\n        ]);\r\n      }\r\n    })();\r\n  }, [destination, days]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n\r\n    const handleClick = (e) => {\r\n      const target = e.target;\r\n      if (target.classList.contains(\"clickable-place\")) {\r\n        const placeName = target.getAttribute(\"data-place\");\r\n        const ref = markerRefs.current[placeName];\r\n        if (ref && ref.current && ref.current.openPopup) {\r\n          ref.current.openPopup();\r\n        }\r\n      }\r\n    };\r\n    document.addEventListener(\"click\", handleClick);\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClick);\r\n    };\r\n  }, [messages, placeMarkers]);\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!inputMessage.trim()) return;\r\n\r\n    const newMessage = {\r\n      id: messages.length + 1,\r\n      text: inputMessage,\r\n      sender: \"user\",\r\n      timestamp: new Date().toLocaleTimeString(),\r\n    };\r\n\r\n    setMessages([...messages, newMessage]);\r\n    const userMessage = inputMessage;\r\n    setInputMessage(\"\");\r\n\r\n    const loadingMessage = {\r\n      id: messages.length + 2,\r\n      text: \"LaWander is thinking...\",\r\n      sender: \"ai\",\r\n      timestamp: new Date().toLocaleTimeString(),\r\n      isLoading: true,\r\n    };\r\n    setMessages((prev) => [...prev, loadingMessage]);\r\n\r\n    try {\r\n      const contextualMessage = `Context: The user is planning a ${days}-day trip to ${destination}. \r\n\r\nIMPORTANT INSTRUCTIONS:\r\n- If the user asks for a specific type of place (restaurants, museums, hotels, etc.), ONLY provide places of that exact type\r\n- ALL places must be located in or very near ${destination}\r\n- When mentioning places, use the format **PlaceName** for each place\r\n- Be specific and accurate about locations - only include places that are actually in ${destination}\r\n- For each place you mention, provide a brief description (1-2 sentences) about what makes it special or what it offers\r\n- Include practical information like cuisine type, atmosphere, or unique features\r\n\r\nUser question: ${userMessage}`;\r\n\r\n      const response = await fetch(`${API_URL}/api/chat`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          message: contextualMessage,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      const placeNames = extractPlaceNames(data.message);\r\n      console.log(\"AI Response:\", data.message);\r\n      console.log(\"Extracted place names:\", placeNames);\r\n\r\n      const placeDescriptions = extractPlaceDescriptions(data.message, placeNames);\r\n\r\n      let foundPlaces = [];\r\n      if (placeNames.length > 0) {\r\n        console.log(\"Starting geocoding for\", placeNames.length, \"places\");\r\n        const destCoords = destinationMarker ? destinationMarker.position : null;\r\n        foundPlaces = await handleGeocodePlaces(placeNames, placeDescriptions, destCoords);\r\n      } else {\r\n        console.log(\"No place names found in AI response\");\r\n      }\r\n\r\n      setMessages((prev) => {\r\n        const withoutLoading = prev.filter((msg) => !msg.isLoading);\r\n        const aiResponse = {\r\n          id: withoutLoading.length + 1,\r\n          text: data.message,\r\n          sender: \"ai\",\r\n          timestamp: new Date().toLocaleTimeString(),\r\n          foundPlaces: foundPlaces,\r\n        };\r\n        return [...withoutLoading, aiResponse];\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error calling chat API:\", error);\r\n\r\n      setMessages((prev) => {\r\n        const withoutLoading = prev.filter((msg) => !msg.isLoading);\r\n        const errorResponse = {\r\n          id: withoutLoading.length + 1,\r\n          text: \"Sorry, I'm having trouble connecting to the server. Please try again later.\",\r\n          sender: \"ai\",\r\n          timestamp: new Date().toLocaleTimeString(),\r\n        };\r\n        return [...withoutLoading, errorResponse];\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-app\">\r\n      <div className=\"chat-header\">\r\n        <div className=\"header-left\">\r\n          <button className=\"back-button\" onClick={onBackToWelcome}>\r\n            ‚Üê Change Trip\r\n          </button>\r\n          <h1 className=\"chat-title\">LaWander</h1>\r\n        </div>\r\n        <div className=\"trip-info\">\r\n          <span className=\"destination\">{destination}</span>\r\n          <span className=\"days\">{days} days</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"chat-container\">\r\n        <div className=\"chat-window\">\r\n          <div className=\"messages-container\">\r\n            {messages.map((message) => (\r\n              <ChatMessage key={message.id} message={message} />\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          <ChatInput\r\n            value={inputMessage}\r\n            onChange={(e) => setInputMessage(e.target.value)}\r\n            onSubmit={handleSendMessage}\r\n          />\r\n        </div>\r\n\r\n        <MapView\r\n          mapCenter={mapCenter}\r\n          destinationMarker={destinationMarker}\r\n          placeMarkers={placeMarkers}\r\n          markerRefs={markerRefs}\r\n          days={days}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}